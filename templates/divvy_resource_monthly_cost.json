{
    "uuid": "divvy.resource_monthly_cost",
    "name": "Resource Monthly Cost",
    "category": "Optimization",
    "description": "This bot identifies resources with costs above a given threshold. It sends a Slack message that will need to be customized to the specific account.",
    "instructions": {
        "actions": [
            {
            "run_when_result_is": true,
            "config": {},
            "name": "divvy.action.mark_non_compliant"
            },
            {
            "run_when_result_is": true,
            "config": {
                "username": "Resource Monthly Cost Bot",
                "message": "An expensive resource has been found:\no  Monthly cost = `{{event.resource.get_monthly_cost()}}`\no  Owner = `{{event.resource.get_owner_name()}}`\no  Resource name = `{{event.resource.get_resource_name()}}`\no  Account = `{{event.resource.get_organization_service_name()}}`\n===",
                "recipient_badge_keys": [],
                "recipient_tag_keys": [],
                "channel": "#expensive-resources"
            },
            "name": "slack.action.send_slack_message"
            }
            ],
        "filters": [
            {
            "config": {
             "maximum_monthly_cost": 1000
            },
            "name": "divvy.filter.monthly_cost_at_least"
            }
        ],
        "groups": [],
        "hookpoints": [
            "divvycloud.resource.created",
            "divvycloud.resource.modified"
        ],
        "ondemand_enabled": true,
        "schedule": null,
        "resource_types": [
            "instance",
            "dbinstance",
            "mcinstance",
            "bigdatainstance",
            "volume"
        ]
    }
}